{% extends "base.html" %}

{% block page_title %}
    {% if form.instance.pk %}
        Arsip Surat >> Ubah
    {% else %}
        Arsip Surat >> Unggah
    {% endif %}
{% endblock %}
{% block content %}
<div class="container" style="max-width: 1000px;">
    <p class="text-muted mb-2">Unggah surat yang telah terbit pada form ini untuk diarsipkan.</p>
    <ul class="text-muted small mb-4">
        <li>Gunakan file berformat PDF</li>
    </ul>
    {% if messages %}
        <div aria-live="polite" aria-atomic="true" class="position-relative">
            <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;">
                {% for message in messages %}
                    <div class="toast align-items-center text-bg-success border-0 show" role="alert" aria-live="assertive" aria-atomic="true" id="successToast">
                        <div class="d-flex">
                            <div class="toast-body">
                                {{ message }}
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var toastElList = [].slice.call(document.querySelectorAll('.toast'));
                toastElList.forEach(function(toastEl) {
                    var toast = new bootstrap.Toast(toastEl, { delay: 10000 });
                    toast.show();
                });
            });
        </script>
    {% endif %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row g-3 align-items-center mb-2">
            <div class="col-md-3">
                <label for="{{ form.nomor_surat.id_for_label }}" class="col-form-label">Nomor Surat</label>
            </div>
            <div class="col-md-6">
                {{ form.nomor_surat }}
                {% if form.nomor_surat.errors %}
                    <div class="invalid-feedback d-block">{{ form.nomor_surat.errors.0 }}</div>
                {% endif %}
            </div>
        </div>

        <div class="row g-3 align-items-center mb-2">
            <div class="col-md-3">
                <label for="{{ form.kategori.id_for_label }}" class="col-form-label">Kategori</label>
            </div>
            <div class="col-md-6">
                {{ form.kategori }}
                {% if form.kategori.errors %}
                    <div class="invalid-feedback d-block">{{ form.kategori.errors.0 }}</div>
                {% endif %}
            </div>
        </div>

        <div class="row g-3 align-items-center mb-2">
            <div class="col-md-3">
                <label for="{{ form.judul.id_for_label }}" class="col-form-label">Judul</label>
            </div>
            <div class="col-md-9">
                {{ form.judul }}
                {% if form.judul.errors %}
                    <div class="invalid-feedback d-block">{{ form.judul.errors.0 }}</div>
                {% endif %}
            </div>
        </div>

        <div class="row g-3 align-items-center mb-4">
            <div class="col-md-3">
                <label for="{{ form.file_pdf.id_for_label }}" class="col-form-label">File Surat (PDF)</label>
            </div>
            <div class="col-md-6">
                {{ form.file_pdf }}
                {% if form.instance.file_pdf %}
                    <small class="form-text text-muted d-block mt-1">File saat ini: <a href="{{ form.instance.file_pdf.url }}" target="_blank">Lihat PDF</a></small>
                {% endif %}
                {% if form.file_pdf.errors %}
                    <div class="invalid-feedback d-block">{{ form.file_pdf.errors.0 }}</div>
                {% endif %}
            </div>
        </div>

        <div class="d-flex justify-content-between">
            <a href="{% url 'surat-list' %}" class="btn btn-secondary">Â« Kembali</a>
            <button type="submit" class="btn btn-primary">Simpan</button>
        </div>
    </form>
</div>
{% endblock %}
